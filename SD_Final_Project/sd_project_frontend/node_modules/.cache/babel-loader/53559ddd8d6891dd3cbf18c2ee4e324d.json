{"ast":null,"code":"var _jsxFileName = \"D:\\\\AN 3\\\\SEM2\\\\SD\\\\SD_Final_Project\\\\sd_project_frontend\\\\src\\\\ViewLocation.js\";\nimport './App.css';\nimport React, { Component } from \"react\";\nimport { Link, Navigate } from \"react-router-dom\";\nimport ReactStars from \"react-rating-stars-component\";\nimport JsPDF from 'jspdf';\nimport html2canvas from \"html2canvas\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ViewLocation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ratingChanged = newRating => {\n      console.log(newRating);\n      this.setState({\n        score: newRating\n      }, () => {\n        console.log(this.state.score);\n        const token = localStorage.getItem(\"jwt\");\n        const data = {\n          location: this.state.loc,\n          score: this.state.score\n        };\n        const requestOptions = {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(data)\n        };\n        fetch('http://localhost:8080/viewlocation', requestOptions);\n      });\n    };\n\n    this.state = {\n      loc: null,\n      error: false,\n      img: '',\n      score: 0\n    };\n  }\n\n  async componentDidMount() {\n    console.log(JSON.parse(localStorage.getItem(\"location\")));\n    this.setState({\n      loc: JSON.parse(localStorage.getItem(\"location\"))\n    }, () => {\n      console.log(this.state.loc.image);\n      this.setState({\n        img: this.state.loc.image\n      });\n    });\n  }\n\n  render() {\n    var _this$state$loc, _this$state$loc2, _this$state$loc3, _this$state$loc4, _this$state$loc5, _this$state$loc6, _this$state$loc7;\n\n    if (this.state.error) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/accessdenied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"body\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"split lefts\",\n        children: /*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"header2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"title-loc\",\n            children: (_this$state$loc = this.state.loc) === null || _this$state$loc === void 0 ? void 0 : _this$state$loc.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 21\n          }, this), (localStorage.getItem(\"type\") === \"ROLE_USER\") > 0 && /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"left\",\n            children: \"Give a score\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 21\n          }, this), (localStorage.getItem(\"type\") === \"ROLE_USER\") > 0 && /*#__PURE__*/_jsxDEV(ReactStars, {\n            classNames: \"left\",\n            count: 5,\n            onChange: this.ratingChanged.bind(null),\n            size: 24,\n            activeColor: \"#ffd700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this), (localStorage.getItem(\"type\") === \"ROLE_USER\") > 0 && /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"left\",\n            children: \"Give a review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"photo\",\n            src: window.location.origin + '/img/' + this.state.img\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            className: \"descr\",\n            children: (_this$state$loc2 = this.state.loc) === null || _this$state$loc2 === void 0 ? void 0 : _this$state$loc2.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: [\"Address: \", (_this$state$loc3 = this.state.loc) === null || _this$state$loc3 === void 0 ? void 0 : _this$state$loc3.address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: [\"Hours: \", (_this$state$loc4 = this.state.loc) === null || _this$state$loc4 === void 0 ? void 0 : _this$state$loc4.hours]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: [\"Country: \", (_this$state$loc5 = this.state.loc) === null || _this$state$loc5 === void 0 ? void 0 : _this$state$loc5.country]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: [\"Category: \", (_this$state$loc6 = this.state.loc) === null || _this$state$loc6 === void 0 ? void 0 : _this$state$loc6.locationType]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text\",\n            children: [\"Score: \", (_this$state$loc7 = this.state.loc) === null || _this$state$loc7 === void 0 ? void 0 : _this$state$loc7.score]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"split rights\",\n        children: /*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"header2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ViewLocation;","map":{"version":3,"names":["React","Component","Link","Navigate","ReactStars","JsPDF","html2canvas","ViewLocation","constructor","props","ratingChanged","newRating","console","log","setState","score","state","token","localStorage","getItem","data","location","loc","requestOptions","method","headers","body","JSON","stringify","fetch","error","img","componentDidMount","parse","image","render","name","bind","window","origin","description","address","hours","country","locationType"],"sources":["D:/AN 3/SEM2/SD/SD_Final_Project/sd_project_frontend/src/ViewLocation.js"],"sourcesContent":["import './App.css';\r\nimport React, {Component} from \"react\";\r\nimport {Link, Navigate} from \"react-router-dom\";\r\nimport ReactStars from \"react-rating-stars-component\";\r\nimport JsPDF from 'jspdf';\r\nimport html2canvas from \"html2canvas\";\r\n\r\n\r\nclass ViewLocation extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {loc:null,error:false,img:'',score:0};\r\n\r\n    }\r\n    async componentDidMount() {\r\n        console.log(JSON.parse(localStorage.getItem(\"location\")))\r\n        this.setState({loc: JSON.parse(localStorage.getItem(\"location\"))},() => {\r\n            console.log(this.state.loc.image);\r\n            this.setState({img:this.state.loc.image});\r\n        });\r\n\r\n\r\n    }\r\n    ratingChanged = (newRating) => {\r\n        console.log(newRating);\r\n        this.setState({score:newRating},() => {\r\n            console.log(this.state.score);\r\n            const token = localStorage.getItem(\"jwt\")\r\n            const data = {\r\n                location: this.state.loc,\r\n                score: this.state.score,\r\n            }\r\n            const requestOptions = {\r\n                method: 'PUT',\r\n                headers:{ 'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`},\r\n                body: JSON.stringify(data)\r\n            };\r\n            fetch('http://localhost:8080/viewlocation',requestOptions)\r\n        });\r\n    };\r\n\r\n    render() {\r\n        if (this.state.error) {\r\n            return <Navigate to={\"/accessdenied\"}/>\r\n        }\r\n        return (\r\n            <body>\r\n            <div className=\"split lefts\">\r\n                <header className=\"header2\">\r\n                    <h1 className=\"title-loc\">{this.state.loc?.name}</h1>\r\n                    {(localStorage.getItem(\"type\") === \"ROLE_USER\") > 0 &&\r\n                    <label className=\"left\">Give a score</label>\r\n                    }\r\n                    {(localStorage.getItem(\"type\")===\"ROLE_USER\") > 0 &&\r\n                    <ReactStars\r\n                        classNames=\"left\"\r\n                        count={5}\r\n                        onChange={this.ratingChanged.bind(null)}\r\n                        size={24}\r\n                        activeColor=\"#ffd700\"\r\n                    />\r\n                    }\r\n                    {(localStorage.getItem(\"type\") === \"ROLE_USER\") > 0 &&\r\n                    <label className=\"left\">Give a review</label>\r\n                    }\r\n                    <img className=\"photo\" src={window.location.origin + '/img/'+this.state.img} />\r\n                    <b className=\"descr\">{this.state.loc?.description}</b>\r\n                    <div className=\"text\">Address: {this.state.loc?.address}</div>\r\n                    <div className=\"text\">Hours: {this.state.loc?.hours}</div>\r\n                    <div className=\"text\">Country: {this.state.loc?.country}</div>\r\n                    <div className=\"text\">Category: {this.state.loc?.locationType}</div>\r\n                    <div className=\"text\">Score: {this.state.loc?.score}</div>\r\n\r\n                </header>\r\n            </div>\r\n            <div className=\"split rights\">\r\n                <header className=\"header2\">\r\n                </header>\r\n            </div>\r\n            </body>\r\n\r\n        )\r\n    }\r\n\r\n}\r\nexport default ViewLocation;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}